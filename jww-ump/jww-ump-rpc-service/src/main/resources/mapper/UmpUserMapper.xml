<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jww.ump.dao.mapper.UmpUserMapper">
    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.jww.ump.model.UmpUserModel">
        <result column="id" property="id"/>
        <result column="account" property="account"/>
        <result column="password" property="password"/>
        <result column="userType" property="userType"/>
        <result column="userName" property="userName"/>
        <result column="namePinyin" property="namePinyin"/>
        <result column="sex" property="sex"/>
        <result column="avatar" property="avatar"/>
        <result column="phone" property="phone"/>
        <result column="email" property="email"/>
        <result column="idCard" property="idCard"/>
        <result column="weiXin" property="weiXin"/>
        <result column="weiBo" property="weiBo"/>
        <result column="qq" property="qq"/>
        <result column="birthDay" property="birthDay"/>
        <result column="deptId" property="deptId"/>
        <result column="deptName" property="deptName"/>
        <result column="position" property="position"/>
        <result column="address" property="address"/>
        <result column="staffNo" property="staffNo"/>
        <result column="enable" property="enable"/>
        <result column="isDel" property="isDel"/>
        <result column="remark" property="remark"/>
        <result column="createTime" property="createTime"/>
        <result column="createBy" property="createBy"/>
        <result column="updateTime" property="updateTime"/>
        <result column="updateBy" property="updateBy"/>
    </resultMap>
    <select id="selectPage"  resultMap="BaseResultMap">
        SELECT u.id_ AS id,u.account_ AS account,u.password_ AS `password`,
        u.user_type AS userType,u.user_name AS userName,u.name_pinyin AS namePinyin,
        u.sex_ AS sex,avatar_ AS avatar,u.phone_ AS phone,u.email_ AS email,id_card AS idCard,
        u.wei_xin AS weiXin,wei_bo AS weiBo,u.qq_ AS qq,u.birth_day AS birthDay,u.dept_id AS deptId,
        d.dept_name as deptName,u.position_ AS `position`,u.address_ AS address,
        u.staff_no AS staffNo,u.enable_ AS `enable`,u.is_del AS isDel,u.remark_ AS remark,
        u.create_time AS createTime,u.create_by AS createBy,u.update_time AS updateTime,
        u.update_by AS updateBy
        FROM sys_user u left join sys_dept d on u.dept_id = d.id_
        where  u.is_del=0
        <if test="searchKey != null">
            AND (u.user_name like "%"#{searchKey}"%" OR phone_ like "%"#{searchKey}"%" OR account_ like "%"#{searchKey}"%" )
        </if>
    </select>
</mapper>
