<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jww.ump.dao.mapper.UmpDeptMapper">
    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.jww.ump.model.UmpDeptModel">
        <result column="id" property="id"/>
        <result column="remark" property="remark"/>
        <result column="enable" property="enable"/>
        <result column="createBy" property="createBy"/>
        <result column="createTime" property="createTime"/>
        <result column="updateBy" property="updateBy"/>
        <result column="updateTime" property="updateTime"/>
        <result column="deptName" property="deptName"/>
        <result column="parentId" property="parentId"/>
        <result column="parentName" property="parentName"/>
        <result column="sortNo" property="sortNo"/>
        <result column="leaf" property="leaf"/>
    </resultMap>
    <select id="selectPage"  resultMap="BaseResultMap">
         SELECT a.id_ AS id,a.unit_id AS unitId,a.dept_name AS deptName,
         a.parent_id AS parentId,b.dept_name parentName,a.sort_no AS sortNo,
         a.leaf_ AS leaf,a.enable_ AS `enable`,a.remark_ AS remark,
         a.create_time AS createTime,a.create_by AS createBy,
         a.update_time AS updateTime,a.update_by AS updateBy FROM sys_dept a
        left join sys_dept b on a.parent_id = b.id_
        where 1=1
        <if test="dept_name != null">
            and a.dept_name like "%"#{dept_name}"%"
        </if>
    </select>
    <select id="selectOne"  resultMap="BaseResultMap">
        SELECT a.id_ AS id,a.unit_id AS unitId,a.dept_name AS deptName,
        a.parent_id AS parentId,b.dept_name parentName,a.sort_no AS sortNo,
        a.leaf_ AS leaf,a.enable_ AS `enable`,a.remark_ AS remark,
        a.create_time AS createTime,a.create_by AS createBy,
        a.update_time AS updateTime,a.update_by AS updateBy FROM sys_dept a
        left join sys_dept b on a.parent_id = b.id_
        where a.id_ = #{id}
    </select>

</mapper>
